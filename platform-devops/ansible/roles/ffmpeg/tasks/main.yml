
- name: Install required utils
  yum: name={{ item }} state=present 
  become: yes
  with_items:
    - git
    - git-core
    - zip
    - build-essential
    
- name: Git clone FFmpeg repo
  git: repo=https://github.com/FFmpeg/FFmpeg.git dest=/home/ec2-user/ffmpeg version=release/3.0 

- name: change the permissions
  file: path=/home/ec2-user/ffmpeg owner=ec2-user group=ec2-user recurse=yes

- name: run the commands
  become: yes
  command: chdir=/home/ec2-user/ffmpeg  ./configure --disable-yasm
       
- name: run the commands
  become: yes
  command: chdir=/home/ec2-user/ffmpeg  make

- name: run the commands
  become: yes
  command: chdir=/home/ec2-user/ffmpeg make install

- name: move files
  become: yes
  command: cp {{ user_home }}/ffmpeg/{{ item }} /usr/local/bin
  with_items:
             - ffmpeg
             - ffprobe
             - ffserver
  
- name: move files
  become: yes
  file: path=/usr/local/bin/{{ item }} owner=ec2-user group=ec2-user mode=0755
  with_items:
     - ffmpeg
     - ffprobe
     - ffserver

